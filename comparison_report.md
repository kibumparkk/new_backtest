# SMA30 ë°±í…ŒìŠ¤íŠ¸ ë²„ì „ ë¹„êµ ë³´ê³ ì„œ

## ê°œìš”

ë‘ ê°€ì§€ ë²„ì „ì˜ SMA30 ë°±í…ŒìŠ¤íŠ¸ êµ¬í˜„ì„ ë¹„êµí•˜ì—¬ ì¼ê´€ì„±ì„ ê²€ì¦í•©ë‹ˆë‹¤.

- **Version 1**: `sma30_backtest.py` (ìˆ˜ì •ëœ ë²„ì „)
- **Version 2**: `sma30_backtest_v2.py` (README ê°€ì´ë“œë¼ì¸ ì™„ì „ ì¤€ìˆ˜ ë²„ì „)

---

## ì„±ê³¼ ì§€í‘œ ë¹„êµ

| ì§€í‘œ | Version 1 | Version 2 | ì°¨ì´ | ìƒíƒœ |
|------|-----------|-----------|------|------|
| **Total Return** | 175.9702x | 175.9702x | 0.0000x | âœ… ì¼ì¹˜ |
| **CAGR** | 90.1325% | 90.1325% | 0.0000% | âœ… ì¼ì¹˜ |
| **MDD** | -40.59% | -40.59% | 0.00% | âœ… ì¼ì¹˜ |
| **Final Equity** | 175.9702ì› | 175.970167ì› | ~0ì› | âœ… ì¼ì¹˜ |
| **ê±°ë˜ ê¸°ê°„** | 2017-10-24 ~ 2025-11-10 | 2017-10-24 ~ 2025-11-10 | - | âœ… ì¼ì¹˜ |
| **ê±°ë˜ì¼ ìˆ˜** | 2,940ì¼ | 2,940ì¼ | 0ì¼ | âœ… ì¼ì¹˜ |

### ë²¤ì¹˜ë§ˆí¬ (Buy & Hold) ë¹„êµ

| ì§€í‘œ | Version 1 | Version 2 | ì°¨ì´ | ìƒíƒœ |
|------|-----------|-----------|------|------|
| **Total Return** | 24.1094x | 24.1094x | 0.0000x | âœ… ì¼ì¹˜ |
| **CAGR** | 48.5163% | 48.5163% | 0.0000% | âœ… ì¼ì¹˜ |
| **MDD** | - | -86.81% | - | â„¹ï¸ V2ë§Œ í¬í•¨ |

---

## Version 2 ì¶”ê°€ ê¸°ëŠ¥

Version 2ì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì¶”ê°€ ì§€í‘œê°€ í¬í•¨ë©ë‹ˆë‹¤:

| ì¶”ê°€ ì§€í‘œ | ê°’ |
|-----------|-----|
| **ê±°ë˜ íšŸìˆ˜** | 186íšŒ |
| **ìŠ¹ë¥ ** | 54.66% |
| **Buy & Hold MDD** | -86.81% |
| **ì „ëµ ìš°ìœ„** | 7.30ë°° |

---

## í•µì‹¬ ë¡œì§ ë¹„êµ

### ì‹ í˜¸ ìƒì„±

**Version 1:**
```python
df['signal'] = (df['close'].shift(1) > df['sma30'].shift(1)).astype(int)
df['position'] = df['signal'].fillna(0)  # shift ì—†ìŒ
```

**Version 2:**
```python
df['prev_close'] = df['close'].shift(1)
df['prev_sma30'] = df['sma30'].shift(1)
df['signal'] = (df['prev_close'] > df['prev_sma30']).astype(int)
df['position'] = df['signal']  # shift ì—†ìŒ
```

**ì°¨ì´ì :**
- V2ëŠ” ì¤‘ê°„ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë” ëª…í™•í•œ ì½”ë“œ ì‘ì„±
- ë¡œì§ì€ ë™ì¼: ì „ì¼ ì¢…ê°€ > ì „ì¼ SMA30
- ë‘ ë²„ì „ ëª¨ë‘ ì´ì¤‘ shift ë²„ê·¸ ìˆ˜ì • ì™„ë£Œ

### ìŠ¬ë¦¬í”¼ì§€ ì ìš©

**Version 1 & 2 ê³µí†µ:**
```python
# ë§¤ìˆ˜/ë§¤ë„ ì‹œ 0.2% ìŠ¬ë¦¬í”¼ì§€
df.loc[df['position_change'] == 1, 'strategy_return'] = -SLIPPAGE  # ë§¤ìˆ˜
df.loc[df['position_change'] == -1, 'strategy_return'] = -SLIPPAGE  # ë§¤ë„
```

---

## ì´ì¤‘ ê²€ì¦ ê²°ê³¼

### Version 1
```
ë²¡í„°í™” ë°©ë²•: 175.970167ì›
ë°˜ë³µë¬¸ ë°©ë²•: 175.970167ì›
ì°¨ì´: 0.000000ì› (0.0000%)
âœ“ ê²€ì¦ ì„±ê³µ
```

### Version 2
```
ë²¡í„°í™” ë°©ë²•: 175.97016656ì›
ë°˜ë³µë¬¸ ë°©ë²•: 175.97016656ì›
ì°¨ì´: 0.00000000ì› (0.000000%)
âœ… ê²€ì¦ ì„±ê³µ
```

**ê²°ë¡ :** ë‘ ë²„ì „ ëª¨ë‘ ë²¡í„°í™”/ë°˜ë³µë¬¸ ë°©ì‹ì´ ì™„ë²½íˆ ì¼ì¹˜

---

## ì¶œë ¥ íŒŒì¼ ë¹„êµ

| íŒŒì¼ | Version 1 | Version 2 |
|------|-----------|-----------|
| ì‹œê°í™” | `backtest_results.png` | `backtest_results_v2.png` |
| ì„±ê³¼ ìš”ì•½ | `performance_summary.csv` | `performance_summary_v2.csv` |
| ì›”ë³„ ìˆ˜ìµë¥  | `monthly_returns.csv` | `monthly_returns_v2.csv` |
| ê±°ë˜ ë‚´ì—­ | - | `trade_log_v2.csv` âœ¨ |

**Version 2 ì¶”ê°€ íŒŒì¼:**
- `trade_log_v2.csv`: 186ê±´ì˜ ê±°ë˜ ë‚´ì—­ ìƒì„¸ ê¸°ë¡

---

## README ê°€ì´ë“œë¼ì¸ ì¤€ìˆ˜ ì²´í¬ë¦¬ìŠ¤íŠ¸

| ìš”êµ¬ì‚¬í•­ | Version 1 | Version 2 | ë¹„ê³  |
|----------|-----------|-----------|------|
| âœ… BTC_KRW ë°ì´í„° ì‚¬ìš© | âœ… | âœ… | |
| âœ… ë²¡í„°í™” + ë°˜ë³µë¬¸ ì´ì¤‘ ê²€ì¦ | âœ… | âœ… | |
| âœ… ê²€ì¦ ì°¨ì´ < 0.01% | âœ… (0.0000%) | âœ… (0.0000%) | |
| âœ… ìŠ¬ë¦¬í”¼ì§€ 0.2% ì ìš© | âœ… | âœ… | |
| âœ… Look-ahead bias ë°©ì§€ (shift) | âœ… | âœ… | |
| âœ… Total Return (ë°°ìˆ˜ x) | âœ… | âœ… | |
| âœ… CAGR ê³„ì‚° | âœ… | âœ… | |
| âœ… MDD ê³„ì‚° | âœ… | âœ… | |
| âœ… 3ê°œ subplot ì‹œê°í™” | âœ… | âœ… | |
| âœ… ì›”ë³„ ìˆ˜ìµë¥  íˆíŠ¸ë§µ | âœ… | âœ… | |
| âœ… Buy & Hold ë²¤ì¹˜ë§ˆí¬ | âœ… | âœ… | |
| âœ… CSV íŒŒì¼ ì €ì¥ | âœ… | âœ… | |
| â­ ê±°ë˜ ë‚´ì—­ ë¡œê·¸ | - | âœ… | V2ë§Œ |
| â­ ìŠ¹ë¥  ê³„ì‚° | - | âœ… | V2ë§Œ |
| â­ ê±°ë˜ íšŸìˆ˜ | - | âœ… | V2ë§Œ |

---

## ìµœì¢… ê²°ë¡ 

### âœ… ê²€ì¦ ê²°ê³¼: ì™„ë²½íˆ ì¼ì¹˜

ë‘ ë²„ì „ì˜ í•µì‹¬ ì„±ê³¼ ì§€í‘œê°€ **100% ì¼ì¹˜**í•©ë‹ˆë‹¤:
- Total Return: 175.97x
- CAGR: 90.13%
- MDD: -40.59%

### ğŸ¯ ê¶Œì¥ì‚¬í•­

**ìƒí™©ë³„ ì‚¬ìš© ê¶Œì¥:**

1. **ê°„ê²°í•œ ì‹¤í–‰:** `sma30_backtest.py` (Version 1)
   - í•µì‹¬ ì§€í‘œë§Œ ë¹ ë¥´ê²Œ í™•ì¸
   - ì½”ë“œê°€ ë” ê°„ê²°í•¨

2. **ìƒì„¸ ë¶„ì„:** `sma30_backtest_v2.py` (Version 2)
   - ê±°ë˜ ë‚´ì—­ ë¡œê·¸ í•„ìš”
   - ìŠ¹ë¥ /ê±°ë˜ íšŸìˆ˜ ë¶„ì„
   - README ê°€ì´ë“œë¼ì¸ ì™„ë²½ ì¤€ìˆ˜
   - ë” ë§ì€ ë²¤ì¹˜ë§ˆí¬ ì •ë³´

### ğŸ“Š í•µì‹¬ ì„±ê³¼

```
ğŸš€ SMA30 ì „ëµ
   â€¢ 175.97ë°° ìˆ˜ìµ (1ì› â†’ 175.97ì›)
   â€¢ ì—°í‰ê·  90.13% ìˆ˜ìµë¥ 
   â€¢ Buy & Hold ëŒ€ë¹„ 7.30ë°° ìš°ìˆ˜
   â€¢ ìµœëŒ€ ë‚™í­ -40.59% (B&H: -86.81%)
```

### ğŸ” ë²„ê·¸ ìˆ˜ì • íš¨ê³¼ (ì°¸ê³ )

**ìˆ˜ì • ì „ (ì´ì¤‘ shift ë²„ê·¸):**
- Total Return: 63.80x
- CAGR: 67.61%
- MDD: -54.34%

**ìˆ˜ì • í›„ (í˜„ì¬):**
- Total Return: 175.97x (+176% ê°œì„ ) âœ¨
- CAGR: 90.13% (+22.5%p ê°œì„ ) âœ¨
- MDD: -40.59% (+13.8%p ê°œì„ ) âœ¨

---

## ê²€ì¦ ì™„ë£Œ ë„ì¥

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘   âœ… ì´ì¤‘ ê²€ì¦ í†µê³¼                    â•‘
â•‘   âœ… ì„±ê³¼ ì§€í‘œ ì¼ì¹˜                    â•‘
â•‘   âœ… README ê°€ì´ë“œë¼ì¸ ì¤€ìˆ˜            â•‘
â•‘   âœ… Look-ahead Bias ë°©ì§€              â•‘
â•‘   âœ… ìŠ¬ë¦¬í”¼ì§€ ì •í™• ì ìš©                â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

**ìƒì„±ì¼:** 2025-11-15
**ê²€ì¦ì:** Claude Code
**ìƒíƒœ:** âœ… ê²€ì¦ ì™„ë£Œ
